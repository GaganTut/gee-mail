<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
        <title>GEE-MAIL Coding Challenge</title>
    <script>
        window.onload = function () {
            // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
            // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser
           
            for (var z = 0 ; z < 10 ; z++) {
                addRow(window.geemails[z]);
            };
            var inboxCount = 10;
            document.getElementById('boxCount').innerHTML = inboxCount + " Geemails";

                function addRow(emails) {
                    var newGeeRow = inbox.insertRow(1);

                    var geeDateCol = newGeeRow.insertCell(0);
                    var geeDate = document.createTextNode(emails.date);
                    geeDateCol.appendChild(geeDate);

                    var geeSubCol = newGeeRow.insertCell(1);
                    var geeSub = document.createTextNode(emails.subject);
                    geeSubCol.appendChild(geeSub);

                    var geeSendCol = newGeeRow.insertCell(2);
                    var geeSend = document.createTextNode(emails.sender);
                    geeSendCol.appendChild(geeSend);

                    var geeBodyCol = newGeeRow.insertCell(3);
                    var bodyBtn = document.createElement('button');
                    geeBodyCol.appendChild(bodyBtn);
                    bodyBtn.innerHTML = "Open Message";
                    bodyBtn.onclick = function () {
                        var cellBody = newGeeRow.insertCell(4);
                        var cellData = document.createTextNode(emails.body);
                        cellBody.appendChild(cellData);
                        bodyBtn.innerHTML = "Close Message";
                        
                    }
                };
                setInterval(function () {
                    alert("New Message!");
                    document.getElementById("btnLoad").disabled = false;
                    btnLoad.onclick = function () {
                        inboxCount += 1;
                        document.getElementById('boxCount').innerHTML = inboxCount + " Geemails"
                        addRow(getNewMessage());
                        document.getElementById("btnLoad").disabled = true;
                    }
                }, 10000);

        };
    </script>
	</head>
<body background="geePic.png">
    <h1>
        GEEMAIL
    </h1>
    <h2>
        Gee, mail sure is coming in...
        <button id="boxCount" disabled="disabled"></button>
        <button id="btnLoad" type="button" disabled="disabled">
            Load More
        </button>
    </h2>
    <div class="container" id="main" style="overflow-x:auto">
        <table id="inbox" class="inTable">
            <tr id="geeHead">
                <th id="hDate">Date</th>
                <th id="hSubject">Subject</th>
                <th id="hSender">Sender</th>
                <th id="hBody">Body</th>
            </tr>
            <tr id="geeBody"></tr>
        </table>
    </div>
</body>
</html>